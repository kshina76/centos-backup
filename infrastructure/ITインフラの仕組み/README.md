# ITインフラの仕組み 書籍メモ

## 2. サーバを開けてみよう
### CPUの内部構造
- P44

## 3. 3階層型システムを見てみよう
### 3-1. OSカーネル
1. システムコールインタフェース
  - アプリケーションはOSを通じて処理を行いたい時は、システムコールインタフェースを通じて命令する
  - 例えば、ネットワーク接続をしたい場合は4番のネットワークスタックにシステムコールインタフェースを介して呼び出す
  - ファイルシステム管理、デバイスドライバーも同じく
6. デバイスドライバー
  - ディスクやNICなどのインタフェースを提供する
  - NICやディスクは色々なベンダーが開発していて、それらを意識するのは大変だからインタフェースによって隠蔽している
  - DBへの接続にもデバイスドライバーが使われる
- P52

## 4. インフラを支える理論の基本
### 直列と並列
- データベースは1コネクションあたり1プロセスを起動する
- DBWRプロセスの(データベースライタープロセス)数を増やして並列でI/Oを発行することも可能
- 非同期I/Oを使ってOS側で書き込みを並列化する仕組みもある
  - insert,update,deleteの時のような書き込む時にデータベースはカーネルレベルで非同期I/Oを実現していので、ソフトウェア側の書き込む時には非同期I/Oで処理してしまって問題ない
- 非同期通信のAjaxの例
  - Googleの検索欄に文字を入力すると、候補が出てくる。これもAJAX
    - 入力中の文字をAjaxによってgoogleのサーバに送信されて、送り返されて表示している
- データベースの書き込みで、非同期でどんどんI/Oを発行してもストレージの速度を超えることはないから大丈夫
- C10K問題とノンブロッキングI/O

### キューとは
- ディスクI/Oについて解説している
- p99~101

### 探索アルゴリズム
- sqlのインデックスについて解説している
- 124~132

## 5. インフラを支える理論の応用
### キャッシュ
- CPUの一次キャッシュ、二次キャッシュ
- ストレージのキャッシュ
- OSのページキャッシュ
- データベースのバッファキャッシュ
- ブラウザキャッシュ(P136の図)
  - Webブラウザにアクセス先のページをキャッシュするもの
  - Webサーバに対するアクセスを減らし、ブラウザでの表示を高速化できる
  - Webサーバの負荷を減らす
- CDN(P136の図)
  - Webサーバとクライアントの間にキャッシュサーバを配置
  - Webサーバの負荷を減らす
- キャッシュが向いているシステム
  - 参照されることが多いデータ
  - キャッシュ上のデータが失われても問題ないシステム
- キャッシュが不向きなシステム
  - データの更新が頻繁にあるシステム
  - 大量のデータにアクセスするシステム
### レプリケーション、マスターワーカー
- P162~170

## 6. ネットワーク
### 階層構造
- OSI参照モデルとか
- 階層構造はネットワークだけのものではない
  - レイヤードアーキテクチャ
  - サーバの中身も階層構造(P188)
### プロトコル
- プロトコルはTCP/IPだけのものではない
  - マウスをPCと繋ぐときのUSBにもプロトコルが存在する
  - ストレージからデータを取り出すときにもプロトコルが決まっていて、SCSIプロトコルなどがある
  - マルチコアのCPUのコア同士が通信する際にもプロトコルが存在する
### TCP/IP4階層モデルとシステムの対応関係(これが知りたかった！！)
- アプリケーション層: プロセス
- TCP, IP: カーネル
- Ethernet, 物理層: ハードウェア
- P195の図

### P184~全てをまとめる
