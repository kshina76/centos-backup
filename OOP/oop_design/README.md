# オブジェクト指向設計

## オブジェクト指向設計の手順(商品注文システムを例に)

- 背景
    - 顧客係(注文を受け付ける人)がユーザから電話をもらって、ユーザ情報と注文内容をシステムに入力していく
    - 顧客係が入力していくところのシステムを開発するという用件

1. 機能設計(ユースケース図)
    - システムの流れを考えながら「誰が何をできるか？」を明確にしていく
    - 箇条書きを行いつつユースケース図を書いていく
    - 例
        - 顧客係がユーザ情報を照会する
        - 顧客係が注文を登録する
        - 顧客係が注文を照会する

        ![2020-11-12 23 20のイメージ](https://user-images.githubusercontent.com/53253817/98951495-a9fb8d00-253d-11eb-9089-12060916857e.jpeg)


2. イベントフロー、シナリオの作成（業務フローモデルとか利用シーンモデルと言われているものかな？）
    - イベントフローは、ユースケース図を具体的に文章にしていく作業
    - シナリオは実際に注文している品物などの固有名詞を使いながら文章にしていく作業

        ![2020-11-12 23 26のイメージ](https://user-images.githubusercontent.com/53253817/98952180-7ec56d80-253e-11eb-9b3c-48deac19001d.jpeg)

3. シーケンス図とクラス図の作成(今回はクラス図のみ解説)
    - ユースケース図やシナリオを元にすることで、シーケンス図とクラス図を作ることができる
    - 手順
        1. クラスの抽出
            - シナリオから、クラスの候補となる名詞や名詞句を検討する(上の図)
            - 名詞や名詞句はオブジェクトの候補になるから、そこからクラスを導き出す(下の図)
            - それがクラスとして適切かどうかを判断

            ![2020-11-12 23 33のイメージ](https://user-images.githubusercontent.com/53253817/98953024-80dbfc00-253f-11eb-8c8b-c2827df4e98b.jpeg)

            ![2020-11-12 23 34のイメージ](https://user-images.githubusercontent.com/53253817/98953109-9a7d4380-253f-11eb-8b47-f42e74fdd1a7.jpeg)

        2. 以下参照
            - https://www.ogis-ri.co.jp/otc/hiroba/UMLTutorial/frm_use.html
            - https://thinkit.co.jp/article/40/3/

- まとめ
    - 小さいプロジェクトの場合、フレームワークのMVCとかに則っていれば設計とかはいらない(3層アーキテクチャくらいなら)
        - MVCでDB設計をすると、それ自体がクラスみたいになるから
        - 逆にDB設計をするためにクラス抽出をするのは有効かも
    - 中規模くらいになってくるとMVCでは収まらなくなって、設計とかが必要になってくる
        - レイヤードアーキテクチャやクリーンアーキテクチャなどを使う必要が出て来る
    - 「ユースケース図、クラス図、シーケンス図」を軽く書けばいいかな
        - ざっとクラス図を書いた後は、プログラムを組みながら、リファクタリングをしていけばいいと思う
        - クラス図の集約とか細かいのはいらないと思う。多分。
        - アクティビティ図を書く人もいる
        - Webアプリケーション開発くらいなら小〜中規模になるからSIerのようなガチガチのUMLモデリングはいらないと思う

- 参考文献
    - https://www.ogis-ri.co.jp/otc/hiroba/UMLTutorial/frm_use.html

---

## UMLのよく使う図の解説

- クラス図

    ![2020-11-12 23 30のイメージ](https://user-images.githubusercontent.com/53253817/98952656-0ca15880-253f-11eb-86a4-60d01431b6c7.jpeg)

    ![2020-11-12 23 30のイメージ (1)](https://user-images.githubusercontent.com/53253817/98952660-0f03b280-253f-11eb-8c63-be0188d2f6cb.jpeg)
