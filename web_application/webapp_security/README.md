# 安全なWebアプリケーションの作り方 書籍メモ

---

- あとでやるところ
    - hiddenパラメータと脆弱性について
        - P54-57
    - Cookieの属性のセキュリティ事項
        - P69-72

---

- IPAの「安全なWebサイトの作り方」ガイドライン
    - https://www.ipa.go.jp/security/vuln/websecurity.html

---

- HTTPリクエスト(GET)
    
    ![2020-10-31 0 09のイメージ](https://user-images.githubusercontent.com/53253817/97722156-a7e10980-1b0d-11eb-81e3-c6e9a2862529.jpeg)

    ![2020-10-31 0 10のイメージ](https://user-images.githubusercontent.com/53253817/97722205-b92a1600-1b0d-11eb-85e0-fe04079b880d.jpeg)

- HTTPリクエスト(POST)

    ![2020-10-31 0 09のイメージ](https://user-images.githubusercontent.com/53253817/97722172-ac0d2700-1b0d-11eb-8fcb-160b0cc3614f.jpeg)

    ![2020-10-31 0 10のイメージ](https://user-images.githubusercontent.com/53253817/97722219-bd563380-1b0d-11eb-86f7-4444ded4340e.jpeg)

- HTTPレスポンス

    ![2020-10-31 0 10のイメージ (1)](https://user-images.githubusercontent.com/53253817/97722227-bfb88d80-1b0d-11eb-9182-1d707ae3a689.jpeg)

    ![2020-10-31 0 11のイメージ](https://user-images.githubusercontent.com/53253817/97722233-c34c1480-1b0d-11eb-9dd2-e82505521e88.jpeg)

- 参考文献
    - https://itsakura.com/network-http-get-post

---

- MIMEとは
    - リソースの種類のこと
    - text/plain
        - テキスト
    - text/html
        - html文書
    - application/xml
        - xml文書
    - imae/gif
        - gif画像
    - etc

---

- GETとPOSTの使い分け
    - GETメソッドはリソースの取得のみに用いること
    - GETメソッドは副作用がないことが期待される
        - 副作用というのは、リソースの削除とか更新されることが起きないということ？
    - 秘密情報の送信にはPOSTメソッドを用いること
        - GETだと何がダメかと言うと
            1. URL上に指定されたパラメータがReferer経由で外部に漏洩する
            2. URL上に指定されたパラメータがアクセスログに残る
            3. URL上のパラメータがブラウザのアドレスバーに表示され他人にのぞかれる
            4. パラメータつきのURLを利用者がソーシャルネットワークなどで共有してしまう
- まとめ(以下が一つでも当てはまる場合にPOSTを使い、それ以外はGET)
    1. データ更新など副作用を伴うリクエストの場合
    2. 秘密情報を送信する場合
    3. 送信するデータの総量が多い場合

---

- 認証の種類
    - Basic認証
        - Basic認証はステートレスなので、ログアウトの概念がない
        - Webサーバの設定で実現されることが多いが、プログラムでもできる
    - フォーム認証
        - HTMLフォームでIDとパスワードを入力させる
    - クライアント認証
        - TLSクライアント証明書を用いる
    - Digest認証

---

- Cookieがアプリケーションデータを保持する目的で使われない理由(IDとかパスワードの格納とかに)
    - Cookieが保持できる値の個数や文字列長には制限がある
    - Cookieの値は利用者本人には参照・変更できるので、秘密情報の格納には向かない

- CookieはセッションIDを格納するために使い、実際のアプリケーションデータを格納するのはセッションが担う

- セッションIDに求められる要件
    1. 第三者がセッションIDを推測できないこと
        - セッションIDの生成には、暗号論的擬似乱数生成器を使う
        - セッションIDの生成はフレームワークなどに任せる
    2. 第三者からセッションIDを強制されないこと
        - セッションIDの固定化攻撃というものがある
    3. 第三者にセッションIDが漏洩しないこと
        1. ネットワーク的にセッションIDが盗聴される
        2. クロスサイトスクリプティングなどアプリケーションの脆弱性によって漏洩
        3. PHPやブラウザの脆弱性により漏洩
        4. セッションIDをURLに保持している場合は、Refererヘッダから漏洩する
        5. クッキー発行の際の属性に不備がある

- セッションIDがクッキー発行の際の属性に不備がある影響で漏洩する問題
    - 

---

