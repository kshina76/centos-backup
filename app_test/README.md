# 初めての自動テスト　書籍メモ

## 1.テストのピラミッド

### 1-1.先人の教訓
1. 全ての自動テストが同等の力を持つわけではない
2. テストを「書くことができる」状態が、「書くべき」だという理由にはならない
3. スピードとフィードバックが重要
- つまり、1つのテストが万能薬のように働くことはない！
  - うまく組み合わせて用いることが必要

### 1-2.テストのピラミッド
- UIテスト（Presentation層〜infra層）
  - メリット
    - エンドツーエンドで動く
    - ユーザと同じ対象を見る
  - デメリット
    - 高コストで遅い
  
- 統合テスト（usecase層〜infra層）
  - メリット
    - WebサービスとAPIがテストできる
    - つながりを見られる
  - デメリット
    - 詳細さに欠ける

- ユニットテスト（infra層）
  - メリット
    - 超高速
    - 多目的に利用できる
  - デメリット
    - 結合部分の確認に弱い

![https---qiita-image-store s3 ap-northeast-1 amazonaws com-0-390780-0e68ad80-e3a8-cc79-6be2-3bbe69d24389](https://user-images.githubusercontent.com/53253817/100713784-2b856300-33f8-11eb-83e6-c496e336937c.png)

### 1-3.自動テストの方針
- UIテストよりユニットテストを優先する
- ユニットテストで埋められない部分を統合テストでカバーする
- UIテストは限定的に使う
- まず「ユニットテストでカバーできないか？」を考える
  - ユニットテストでカバーできないなら、統合テストでカバーできるか考えるといったように段階的にどの層テストを適用するか考える
- 全てを自動化しようとせず、代わりに、過不足なく自動化すること
- 上位と下位のテストがかぶることもある
  - ただしそれらはスコープが違う
  - 協調して無意味な重複を避けていくことが大事
- 探索的テスト(手順化されてないテスト)も忘れないこと

### 1章の疑問
- レイヤードアーキテクチャで考えたときにpresentation、usecase、infraのそれぞれをユニットテストすることはないのか？
  - 上の説明だとusecase層をテストすることは統合テストを行うのであって、ユニットテストをすることでは内容に見えるが

<br></br>

## 2.
